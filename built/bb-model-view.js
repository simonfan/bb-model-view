//     bb-model-view
//     (c) simonfan
//     bb-model-view is licensed under the MIT terms.

define("__bb-model-view/model-to-dom/update",["require","exports","module","lodash"],function(e,i,t){{var o=e("lodash");t.exports=function(e){var i=this.stringifiers,t=o.mapValues(e.attributes,function(e,t){var o=i[t];return o?o.call(this,e):e});this.fill(t)}}}),define("__bb-model-view/model-to-dom/index",["require","exports","module","jquery.filler","./update"],function(e,i,t){var o=(e("jquery.filler"),e("./update"));t.exports=function(){this.fill=this.$el.filler(this.map),this.listenTo(this.model,"change",o),o.call(this,this.model)}}),define("__bb-model-view/dom-to-model/read-dom-value",["require","exports","module","lodash","jquery"],function(e,i,t){var o=e("lodash"),r=e("jquery"),n={"default":function(e){return e.val()},DIV:function(e){return e.html()},INPUT:function(e){return"checkbox"===e.prop("type")?o.map(e.filter(":checked"),function(e){return r(e).val()}):e.val()}};t.exports=function(e){var i=e.prop("tagName"),t=n[i]||n["default"];return t(e)}}),define("__bb-model-view/dom-to-model/update",["require","exports","module","jquery","./read-dom-value"],function(e,i,t){var o=e("jquery"),r=e("./read-dom-value");t.exports=function(e){var i=o(e.target),t=i.data(this.bbmvUIDAttribute);if(!_.isUndefined(t)&&this.bindings[t]){var n=this.bindings[t],l=n.attribute,s=r(i),d=this.parsers[l];s=d?d.call(this,s):s,this.model.set(l,s)}}}),define("__bb-model-view/dom-to-model/index",["require","exports","module","lodash","./update"],function(e,i,t){function o(e){return e.replace(/\s*->.*$/,"")}function r(e,i,t){if(n.isArray(i))n.each(i,function(i){r(e,i,t)});else{var l=n.uniqueId("bbmvEl_"),s=o(i),d=e.$el.find(s).filter(":input");d.length>0&&(e.bindings[l]={el:d,selector:s,attribute:t},d.data(e.bbmvUIDAttribute,l))}}var n=e("lodash"),l=e("./update");t.exports=function(){this.bindings={},n.each(this.map,n.partial(r,this));var e=n.map(this.bindings,function(e){return e.selector}).join(", ");this.$el.on("change",e,n.bind(l,this))}}),define("bb-model-view",["require","exports","module","lodash","bb-dock","lowercase-backbone","./__bb-model-view/model-to-dom/index","./__bb-model-view/dom-to-model/index"],function(e,i,t){{var o=(e("lodash"),e("bb-dock").model,e("lowercase-backbone")),r=e("./__bb-model-view/model-to-dom/index"),n=e("./__bb-model-view/dom-to-model/index");t.exports=o.view.extend({bbmvUIDAttribute:"bbmvUID",initialize:function(){o.view.prototype.initialize.apply(this,arguments),this.initializeModelView.apply(this,arguments)},initializeModelView:function(e){if(!this.model)throw new Error("No model set for model view.");e=e||{},this.map=e.map||this.map,this.parsers=e.parsers||this.parsers,this.sringifiers=e.stringifiers||this.stringifiers,r.call(this),n.call(this)},map:{},stringifiers:{},parsers:{}})}});