//     bb-model-view
//     (c) simonfan
//     bb-model-view is licensed under the MIT terms.

define("__bb-model-view/bind",["require","exports","module","lodash","lowercase-backbone","jquery-value"],function(e,i){{var t=e("lodash");e("lowercase-backbone"),e("jquery-value")}i.DOMToModel=function(e){e.on("change",t.bind(function(e){var i=$(e.target);return this.updateModel(i),!1},this))},i.modelToDOM=function(e){e.on("change",t.bind(function(){this.updateView()},this))}}),define("__bb-model-view/update",["require","exports","module","lodash"],function(e,i){var t=e("lodash");i.updateView=function(){var e=this.pump.pump();return this.ready=t.bind(e.done,e),e},i.updateModel=function(e){var i=this.pump.drain(e);return this.ready=t.bind(i.done,i),i}}),define("__bb-model-view/model-pump",["require","exports","module","jquery-pump","lodash"],function(e,i){function t(e){return e}function r(e,i){if(!e)return t;var r=e[i];return r?n.isFunction(r)?r:e[r]:t}var o=e("jquery-pump"),n=e("lodash");i.modelPump=o.extend({initialize:function(e,i){n.bindAll(this,["srcGet","srcSet"]),o.prototype.initialize.call(this,e,i),i=i||{},n.each(["stringify","stringifiers","parsers","parse"],function(e){this[e]=i[e]||this[e]},this)},srcGet:function(e,i){var t=e.get(i);return this.stringify(i,t)},srcSet:function(e,i,t){var t=e.set(i,t);return this.parse(i,t)},stringifiers:void 0,stringify:function(e,i){var t=r(this.stringifiers,e);return t(i)},parsers:void 0,parse:function(e,i){var t=r(this.parsers,e);return t(i)}})}),define("__bb-model-view/elements",["require","exports","module","jquery-selector-data-prefix"],function(e,i){e("jquery-selector-data-prefix"),i.prefix="bind",i.boundElements=function(){var e=this.$el.find(":data-prefix("+this.prefix+")");return this.$el.add(e)}}),define("bb-model-view",["require","exports","module","lodash","lowercase-backbone","jquery-value","./__bb-model-view/bind","./__bb-model-view/update","./__bb-model-view/model-pump","./__bb-model-view/elements"],function(e,i,t){var r=e("lodash"),o=e("lowercase-backbone"),n=(e("jquery-value"),e("./__bb-model-view/bind")),s=["parse","parsers","stringify","stringifiers","prefix"],d=t.exports=o.view.extend({initialize:function(){o.view.prototype.initialize.apply(this,arguments),this.initializeModelView.apply(this,arguments)},initializeModelView:function(e){if(!this.model)throw new Error("No model set for model view.");if(!this.$el)throw new Error("No el set on model view.");var i=this.boundElements();console.log(e);var t=r.pick(e,s);r.defaults(t,r.pick(this,s)),t.destination=i,this.pump=this.modelPump(this.model,t),n.DOMToModel.call(this,i),n.modelToDOM.call(this,this.model),this.updateView()}});d.assignProto(e("./__bb-model-view/update")).assignProto(e("./__bb-model-view/model-pump")).assignProto(e("./__bb-model-view/elements"))});